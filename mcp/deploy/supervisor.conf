# ============================================
# MCP AI Red Team - Supervisor配置文件
# 路径: /etc/supervisord.d/mcp-redteam.ini (CentOS)
#       /etc/supervisor/conf.d/mcp-redteam.conf (Ubuntu)
# ============================================

[program:mcp-redteam]
# 项目目录
directory=/www/wwwroot/mcp-redteam

# 启动命令 (使用Gunicorn)
command=/www/wwwroot/mcp-redteam/venv/bin/gunicorn -w 4 -b 127.0.0.1:5000 --timeout 300 --keep-alive 5 --access-logfile /www/wwwroot/mcp-redteam/logs/gunicorn-access.log --error-logfile /www/wwwroot/mcp-redteam/logs/gunicorn-error.log wsgi:application

# 运行用户
user=www

# 进程数量
numprocs=1

# 自动启动
autostart=true

# 自动重启
autorestart=true

# 启动等待时间
startsecs=10

# 停止等待时间
stopwaitsecs=60

# 停止信号
stopsignal=TERM

# 重定向标准输出
stdout_logfile=/www/wwwroot/mcp-redteam/logs/supervisor-stdout.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10

# 重定向标准错误
stderr_logfile=/www/wwwroot/mcp-redteam/logs/supervisor-stderr.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=10

# 环境变量
environment=
    PYTHONUNBUFFERED="1",
    PATH="/www/wwwroot/mcp-redteam/venv/bin:/usr/local/go/bin:/usr/local/bin:/usr/bin:/bin",
    LANG="en_US.UTF-8",
    LC_ALL="en_US.UTF-8"

# 优先级
priority=999
